<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle Solver</title>
    <style>
        :root {
            --green: #6aaa64;
            --green-dark: #538d4e;
            --yellow: #c9b458;
            --yellow-dark: #b59f3b;
            --gray: #787c7e;
            --gray-light: #d3d6da;
            --black: #121213;
            --white: #ffffff;
            --bg-light: #ffffff;
            --bg-dark: #121213;
            --text-light: #121213;
            --text-dark: #f8f8f8;
            --border-light: #d3d6da;
            --border-dark: #3a3a3c;
            --input-bg-light: #ffffff;
            --input-bg-dark: #3a3a3c;
            --card-bg-light: #ffffff;
            --card-bg-dark: #1a1a1b;
            --hover-light: #f6f7f8;
            --hover-dark: #2f2f31;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: "Clear Sans", "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-light);
            color: var(--text-light);
            min-height: 100vh;
            padding: 1rem;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        body.dark {
            background-color: var(--bg-dark);
            color: var(--text-dark);
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 1rem;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-light);
        }

        body.dark .header {
            border-bottom-color: var(--border-dark);
        }
        
        h1 {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: 0.01em;
            color: var(--text-light);
        }

        body.dark h1 {
            color: var(--text-dark);
        }

        .theme-toggle {
            background: none;
            border: 1px solid var(--border-light);
            border-radius: 4px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-size: 0.875rem;
            color: var(--text-light);
            transition: all 0.2s;
        }

        body.dark .theme-toggle {
            border-color: var(--border-dark);
            color: var(--text-dark);
        }

        .theme-toggle:hover {
            background: var(--hover-light);
        }

        body.dark .theme-toggle:hover {
            background: var(--hover-dark);
        }
        
        .input-section {
            margin-bottom: 2rem;
        }
        
        .word-input-group {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        .letter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            align-items: center;
        }
        
        .letter-input {
            width: 50px;
            height: 50px;
            padding: 0;
            font-size: 1.5rem;
            border: 2px solid var(--border-light);
            border-radius: 4px;
            text-transform: uppercase;
            font-family: "Clear Sans", "Helvetica Neue", Arial, sans-serif;
            font-weight: 700;
            text-align: center;
            background: var(--input-bg-light);
            color: var(--text-light);
            transition: all 0.2s;
        }

        body.dark .letter-input {
            border-color: var(--border-dark);
            background: var(--input-bg-dark);
            color: var(--text-dark);
        }
        
        .letter-input:focus {
            outline: none;
            border-color: var(--green);
        }

        body.dark .letter-input:focus {
            border-color: var(--green-dark);
        }
        
        .feedback-input {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }
        
        .feedback-btn {
            width: 50px;
            height: 50px;
            font-size: 1.25rem;
            font-weight: 700;
            border: 2px solid var(--border-light);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.15s;
            background: var(--input-bg-light);
            color: var(--text-light);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        body.dark .feedback-btn {
            border-color: var(--border-dark);
            background: var(--input-bg-dark);
            color: var(--text-dark);
        }
        
        .feedback-btn.green {
            background: var(--green);
            color: var(--white);
            border-color: var(--green);
        }

        body.dark .feedback-btn.green {
            background: var(--green-dark);
            border-color: var(--green-dark);
        }
        
        .feedback-btn.yellow {
            background: var(--yellow);
            color: var(--white);
            border-color: var(--yellow);
        }

        body.dark .feedback-btn.yellow {
            background: var(--yellow-dark);
            border-color: var(--yellow-dark);
        }
        
        .feedback-btn.gray {
            background: var(--gray);
            color: var(--white);
            border-color: var(--gray);
        }
        
        .feedback-btn:not(.green):not(.yellow):not(.gray):hover {
            background: var(--hover-light);
        }

        body.dark .feedback-btn:not(.green):not(.yellow):not(.gray):hover {
            background: var(--hover-dark);
        }
        
        .add-btn {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 700;
            background: var(--green);
            color: var(--white);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
            letter-spacing: 0.05em;
        }

        body.dark .add-btn {
            background: var(--green-dark);
        }
        
        .add-btn:hover {
            background: var(--green-dark);
        }

        body.dark .add-btn:hover {
            background: var(--green);
        }
        
        .add-btn:disabled {
            background: var(--gray-light);
            cursor: not-allowed;
        }

        body.dark .add-btn:disabled {
            background: var(--border-dark);
        }
        
        .reset-btn {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 700;
            background: transparent;
            color: var(--text-light);
            border: 1px solid var(--border-light);
            border-radius: 4px;
            cursor: pointer;
            margin-left: 0.5rem;
            transition: all 0.2s;
            letter-spacing: 0.05em;
        }

        body.dark .reset-btn {
            color: var(--text-dark);
            border-color: var(--border-dark);
        }
        
        .reset-btn:hover {
            background: var(--hover-light);
        }

        body.dark .reset-btn:hover {
            background: var(--hover-dark);
        }
        
        .attempts {
            margin-top: 2rem;
        }

        .attempts h3 {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-light);
        }

        body.dark .attempts h3 {
            color: var(--text-dark);
        }
        
        .attempt {
            display: flex;
            gap: 1rem;
            align-items: center;
            padding: 1rem;
            background: var(--card-bg-light);
            border: 1px solid var(--border-light);
            border-radius: 4px;
            margin-bottom: 0.5rem;
            transition: all 0.2s;
        }

        body.dark .attempt {
            background: var(--card-bg-dark);
            border-color: var(--border-dark);
        }
        
        .attempt-word {
            font-family: "Clear Sans", "Helvetica Neue", Arial, sans-serif;
            font-size: 1.25rem;
            font-weight: 700;
            letter-spacing: 0.1em;
            min-width: 100px;
            color: var(--text-light);
        }

        body.dark .attempt-word {
            color: var(--text-dark);
        }
        
        .attempt-feedback {
            display: flex;
            gap: 0.3rem;
        }
        
        .feedback-dot {
            width: 30px;
            height: 30px;
            border-radius: 4px;
            display: inline-block;
        }
        
        .feedback-dot.green {
            background: var(--green);
        }

        body.dark .feedback-dot.green {
            background: var(--green-dark);
        }
        
        .feedback-dot.yellow {
            background: var(--yellow);
        }

        body.dark .feedback-dot.yellow {
            background: var(--yellow-dark);
        }
        
        .feedback-dot.gray {
            background: var(--gray);
        }
        
        .words-section {
            margin-top: 2rem;
        }
        
        .words-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .words-header h2 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-light);
        }

        body.dark .words-header h2 {
            color: var(--text-dark);
        }
        
        .word-count {
            font-size: 0.875rem;
            color: var(--gray);
            font-weight: 600;
        }
        
        .words-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 0.5rem;
            max-height: 400px;
            overflow-y: auto;
            padding: 1rem;
            background: var(--card-bg-light);
            border: 1px solid var(--border-light);
            border-radius: 4px;
        }

        body.dark .words-grid {
            background: var(--card-bg-dark);
            border-color: var(--border-dark);
        }
        
        .word-item {
            padding: 0.75rem 0.5rem;
            background: var(--input-bg-light);
            border: 1px solid var(--border-light);
            border-radius: 4px;
            text-align: center;
            font-family: "Clear Sans", "Helvetica Neue", Arial, sans-serif;
            font-weight: 700;
            font-size: 0.875rem;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: all 0.15s;
            color: var(--text-light);
        }

        body.dark .word-item {
            background: var(--input-bg-dark);
            border-color: var(--border-dark);
            color: var(--text-dark);
        }
        
        .word-item:hover {
            background: var(--green);
            color: var(--white);
            border-color: var(--green);
            transform: scale(1.05);
        }

        body.dark .word-item:hover {
            background: var(--green-dark);
            border-color: var(--green-dark);
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
            color: var(--gray);
        }

        body.dark .loading {
            color: var(--gray-light);
        }
        
        .instructions {
            background: var(--hover-light);
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
            line-height: 1.6;
            color: var(--text-light);
            border: 1px solid var(--border-light);
        }

        body.dark .instructions {
            background: var(--hover-dark);
            border-color: var(--border-dark);
            color: var(--text-dark);
        }
        
        .instructions strong {
            font-weight: 700;
        }

        .instructions .color-gray {
            color: var(--gray);
        }

        .instructions .color-green {
            color: var(--green);
        }

        body.dark .instructions .color-green {
            color: var(--green-dark);
        }

        .instructions .color-yellow {
            color: var(--yellow);
        }

        body.dark .instructions .color-yellow {
            color: var(--yellow-dark);
        }

        /* Scrollbar styling */
        .words-grid::-webkit-scrollbar {
            width: 8px;
        }

        .words-grid::-webkit-scrollbar-track {
            background: var(--hover-light);
            border-radius: 4px;
        }

        body.dark .words-grid::-webkit-scrollbar-track {
            background: var(--hover-dark);
        }

        .words-grid::-webkit-scrollbar-thumb {
            background: var(--gray-light);
            border-radius: 4px;
        }

        body.dark .words-grid::-webkit-scrollbar-thumb {
            background: var(--border-dark);
        }

        .words-grid::-webkit-scrollbar-thumb:hover {
            background: var(--gray);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>WORDLE SOLVER</h1>
            <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()">Dark</button>
        </div>
        
        <div class="instructions">
            <strong>How to use:</strong> Enter a 5-letter word you tried in Wordle, then click the feedback buttons for each letter to cycle through:
            <strong class="color-gray">Gray</strong> (default) = letter is not in the word, 
            <strong class="color-yellow">Yellow</strong> = letter is in the word but wrong position, 
            <strong class="color-green">Green</strong> = correct letter in correct position. Click "Add Attempt" to filter the word list.
        </div>
        
        <div class="input-section">
            <div class="word-input-group" id="wordInputGroup"></div>
            <div style="display: flex; justify-content: center; gap: 0.5rem; margin-top: 1rem;">
                <button class="add-btn" id="addBtn" onclick="addAttempt()">Add Attempt</button>
                <button class="reset-btn" id="resetBtn" onclick="resetSolver()">Reset</button>
            </div>
        </div>
        
        <div class="attempts" id="attempts"></div>
        
        <div class="words-section">
            <div class="words-header">
                <h2>Possible Words</h2>
                <div class="word-count" id="wordCount">Loading...</div>
            </div>
            <div class="words-grid" id="wordsGrid">
                <div class="loading">Loading words...</div>
            </div>
        </div>
    </div>

    <script>
        let allWords = [];
        let filteredWords = [];
        let attempts = [];

        // Theme management
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                document.body.classList.add('dark');
                document.getElementById('themeToggle').textContent = 'Light';
            } else {
                document.body.classList.remove('dark');
                document.getElementById('themeToggle').textContent = 'Dark';
            }
        }

        function toggleTheme() {
            const isDark = document.body.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            document.getElementById('themeToggle').textContent = isDark ? 'Light' : 'Dark';
        }

        // Load words from file
        async function loadWords() {
            try {
                const response = await fetch('fiveltr.txt');
                const text = await response.text();
                allWords = text.trim().split('\n').map(word => word.trim().toLowerCase()).filter(word => word.length === 5);
                filteredWords = [...allWords];
                updateWordDisplay();
                setupFeedbackButtons();
            } catch (error) {
                console.error('Error loading words:', error);
                document.getElementById('wordsGrid').innerHTML = '<div class="loading">Error loading words file</div>';
            }
        }

        // Setup letter inputs and feedback buttons
        function setupFeedbackButtons() {
            const wordInputGroup = document.getElementById('wordInputGroup');
            wordInputGroup.innerHTML = '';
            
            for (let i = 0; i < 5; i++) {
                const letterGroup = document.createElement('div');
                letterGroup.className = 'letter-group';
                
                // Create letter input
                const letterInput = document.createElement('input');
                letterInput.type = 'text';
                letterInput.className = 'letter-input';
                letterInput.id = `letterInput${i}`;
                letterInput.maxLength = 1;
                letterInput.autocomplete = 'off';
                letterInput.dataset.index = i;
                
                // Auto-advance to next input on letter entry
                letterInput.addEventListener('input', (e) => {
                    e.target.value = e.target.value.toUpperCase().replace(/[^A-Z]/g, '');
                    if (e.target.value && i < 4) {
                        document.getElementById(`letterInput${i + 1}`).focus();
                    }
                });
                
                // Handle backspace to go to previous input
                letterInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Backspace' && !e.target.value && i > 0) {
                        document.getElementById(`letterInput${i - 1}`).focus();
                    }
                });
                
                // Create feedback button
                const feedbackBtn = document.createElement('button');
                feedbackBtn.className = 'feedback-btn gray';
                feedbackBtn.textContent = '✗';
                feedbackBtn.dataset.index = i;
                feedbackBtn.onclick = () => toggleFeedback(feedbackBtn);
                
                letterGroup.appendChild(letterInput);
                letterGroup.appendChild(feedbackBtn);
                wordInputGroup.appendChild(letterGroup);
            }
        }

        // Toggle feedback button state
        function toggleFeedback(btn) {
            const states = ['gray', 'yellow', 'green'];
            const currentState = btn.className.includes('green') ? 'green' : 
                                btn.className.includes('yellow') ? 'yellow' : 'gray';
            const currentIndex = states.indexOf(currentState);
            const nextIndex = (currentIndex + 1) % states.length;
            const nextState = states[nextIndex];
            
            btn.className = 'feedback-btn';
            btn.classList.add(nextState);
            btn.textContent = nextState === 'green' ? '✓' : nextState === 'yellow' ? '~' : '✗';
        }

        // Add attempt and filter words
        function addAttempt() {
            // Collect letters from individual inputs
            let word = '';
            for (let i = 0; i < 5; i++) {
                const letterInput = document.getElementById(`letterInput${i}`);
                const letter = letterInput.value.trim().toUpperCase();
                if (!letter) {
                    alert('Please enter all 5 letters');
                    return;
                }
                word += letter;
            }
            word = word.toLowerCase();
            
            const feedback = [];
            const feedbackBtns = document.querySelectorAll('.feedback-btn');
            
            for (let i = 0; i < 5; i++) {
                const btn = feedbackBtns[i];
                let state = 'gray'; // Default to gray
                if (btn.classList.contains('green')) state = 'green';
                else if (btn.classList.contains('yellow')) state = 'yellow';
                else if (btn.classList.contains('gray')) state = 'gray';
                
                feedback.push(state);
            }
            
            attempts.push({ word, feedback });
            displayAttempts();
            filterWords();
            
            // Clear inputs
            setupFeedbackButtons();
            document.getElementById('letterInput0').focus();
        }

        // Display attempts
        function displayAttempts() {
            const attemptsDiv = document.getElementById('attempts');
            if (attempts.length === 0) {
                attemptsDiv.innerHTML = '';
                return;
            }
            
            attemptsDiv.innerHTML = '<h3>Your Attempts:</h3>';
            attempts.forEach((attempt, idx) => {
                const attemptDiv = document.createElement('div');
                attemptDiv.className = 'attempt';
                
                const wordSpan = document.createElement('span');
                wordSpan.className = 'attempt-word';
                wordSpan.textContent = attempt.word.toUpperCase();
                
                const feedbackDiv = document.createElement('div');
                feedbackDiv.className = 'attempt-feedback';
                
                attempt.feedback.forEach(state => {
                    const dot = document.createElement('span');
                    dot.className = `feedback-dot ${state}`;
                    feedbackDiv.appendChild(dot);
                });
                
                attemptDiv.appendChild(wordSpan);
                attemptDiv.appendChild(feedbackDiv);
                attemptsDiv.appendChild(attemptDiv);
            });
        }

        // Filter words based on attempts
        function filterWords() {
            filteredWords = allWords.filter(word => {
                return attempts.every(attempt => matchesAttempt(word, attempt));
            });
            updateWordDisplay();
        }

        // Check if word matches an attempt
        function matchesAttempt(word, attempt) {
            const wordLetters = word.split('');
            const attemptWord = attempt.word.split('');
            const feedback = attempt.feedback;
            
            // Check green (correct position)
            for (let i = 0; i < 5; i++) {
                if (feedback[i] === 'green') {
                    if (wordLetters[i] !== attemptWord[i]) {
                        return false;
                    }
                }
            }
            
            // Check gray (not in word)
            for (let i = 0; i < 5; i++) {
                if (feedback[i] === 'gray') {
                    const letter = attemptWord[i];
                    // Count how many times this letter appears in the attempt word
                    const countInAttempt = attemptWord.filter(l => l === letter).length;
                    // Count how many times it appears in feedback (green or yellow)
                    const countInFeedback = feedback.filter((f, idx) => 
                        (f === 'green' || f === 'yellow') && attemptWord[idx] === letter
                    ).length;
                    
                    // If all instances of this letter are gray, the letter shouldn't be in the word at all
                    if (countInAttempt === countInFeedback) {
                        if (wordLetters.includes(letter)) {
                            return false;
                        }
                    } else {
                        // Some instances are green/yellow, so we can only say this specific position doesn't have it
                        // But we need to be careful - if this is the only gray instance, the letter might still be in the word
                        // For simplicity, we'll check if the letter appears more times than allowed
                        const countInWord = wordLetters.filter(l => l === letter).length;
                        if (countInWord >= countInFeedback) {
                            // This is okay, but we still need to check this specific position
                            if (wordLetters[i] === letter) {
                                return false;
                            }
                        }
                    }
                }
            }
            
            // Check yellow (in word but wrong position)
            for (let i = 0; i < 5; i++) {
                if (feedback[i] === 'yellow') {
                    const letter = attemptWord[i];
                    // Letter must be in the word
                    if (!wordLetters.includes(letter)) {
                        return false;
                    }
                    // But not in this position
                    if (wordLetters[i] === letter) {
                        return false;
                    }
                    
                    // Count how many times this letter appears in green/yellow feedback
                    const countInFeedback = feedback.filter((f, idx) => 
                        (f === 'green' || f === 'yellow') && attemptWord[idx] === letter
                    ).length;
                    
                    // The word must have at least this many instances of the letter
                    const countInWord = wordLetters.filter(l => l === letter).length;
                    if (countInWord < countInFeedback) {
                        return false;
                    }
                }
            }
            
            return true;
        }

        // Update word display
        function updateWordDisplay() {
            const wordsGrid = document.getElementById('wordsGrid');
            const wordCount = document.getElementById('wordCount');
            
            wordCount.textContent = `${filteredWords.length} possible word${filteredWords.length !== 1 ? 's' : ''}`;
            
            if (filteredWords.length === 0) {
                wordsGrid.innerHTML = '<div class="loading">No words match your criteria</div>';
                return;
            }
            
            wordsGrid.innerHTML = '';
            filteredWords.forEach(word => {
                const wordDiv = document.createElement('div');
                wordDiv.className = 'word-item';
                wordDiv.textContent = word.toUpperCase();
                wordDiv.onclick = () => {
                    const letters = word.toUpperCase().split('');
                    for (let i = 0; i < 5; i++) {
                        const letterInput = document.getElementById(`letterInput${i}`);
                        if (letterInput) {
                            letterInput.value = letters[i] || '';
                        }
                    }
                    document.getElementById('letterInput0').focus();
                };
                wordsGrid.appendChild(wordDiv);
            });
        }

        // Reset solver
        function resetSolver() {
            if (confirm('Are you sure you want to reset? This will clear all attempts.')) {
                attempts = [];
                filteredWords = [...allWords];
                displayAttempts();
                updateWordDisplay();
                setupFeedbackButtons();
                document.getElementById('letterInput0').focus();
            }
        }

        // Allow Enter key to add attempt from any letter input
        document.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && e.target.classList.contains('letter-input')) {
                addAttempt();
            }
        });

        // Initialize theme and load words on page load
        initTheme();
        loadWords();
    </script>
</body>
</html>
